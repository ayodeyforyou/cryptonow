<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login | CryptoNow</title>
    <link rel="stylesheet" href="practice1.css" />
    <!-- Firebase scripts here (see above) -->
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyCq0a3H7LIYRnBEdWuHl4XUlmn06ojN01w",
        authDomain: "cryptonowbyfirebyforce.firebaseapp.com",
        projectId: "cryptonowbyfirebyforce",
        storageBucket: "cryptonowbyfirebyforce.firebasestorage.app",
        messagingSenderId: "245282040067",
        appId: "1:245282040067:web:12dc1f560691d3e9d6e136",
        measurementId: "G-20726VFERM",
      };

      firebase.initializeApp(firebaseConfig);
    </script>
  </head>
  <body>
    <div class="auth-container">
      <h2>Login to CryptoNow</h2>
      <form id="loginForm">
        <input type="email" id="loginEmail" placeholder="Email" required />
        <input
          type="password"
          id="loginPassword"
          placeholder="Password"
          required
        />
        <button type="submit">Login</button>
      </form>
      <p>Don't have an account? <a href="signup.html">Sign up</a></p>
      <div id="loginError" class="auth-error"></div>
    </div>
    <script>
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const email = document.getElementById("loginEmail").value;
          const password = document.getElementById("loginPassword").value;
          firebase
            .auth()
            .signInWithEmailAndPassword(email, password)
            .then(() => {
              window.location.href = "practice1.html";
            })
            .catch((err) => {
              document.getElementById("loginError").textContent = err.message;
            });
        });
      // Redirect if already logged in
      firebase.auth().onAuthStateChanged((user) => {
        if (user) window.location.href = "practice1.html";
      });
    </script>
  </body>
</html>
