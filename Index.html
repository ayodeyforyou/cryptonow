<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>practice and shi</title>
    <link rel="stylesheet" href="practice1.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="dashnau">
      <header>
        <span>CryptoNow</span>
        <div class="header-profile">
          <div class="profile-icon" id="profileDropdownToggle">
            <img
              src="https://ui-avatars.com/api/?name=User&background=516b85&color=fff&rounded=true&size=32"
              alt="Profile"
            />
            <span class="profile-caret">▼</span>
          </div>
          <div class="profile-dropdown" id="profileDropdown">
            <ul>
              <li>View Profile</li>
              <li>Settings</li>
              <li>Logout</li>
            </ul>
          </div>
        </div>
      </header>
      <aside class="sidebar">
        <div class="sidebar-toggle" id="sidebar-toggle">≡</div>
        <nav class="sidebarnav">
          <ul>
            <li class="sidebar-item" data-section="dashboard">
              <span class="material-icons-outlined sidebar-icon"
                >dashboard</span
              >
              <span class="sidebar-label">Dashboard</span>
            </li>
            <li class="sidebar-item" data-section="portfolio">
              <span class="material-icons-outlined sidebar-icon"
                >account_balance_wallet</span
              >
              <span class="sidebar-label">Portfolio</span>
            </li>
            <li class="sidebar-item" data-section="watchlist">
              <span class="material-icons-outlined sidebar-icon"
                >star_border</span
              >
              <span class="sidebar-label">Watchlist</span>
            </li>
            <li class="sidebar-item" data-section="market">
              <span class="material-icons-outlined sidebar-icon"
                >show_chart</span
              >
              <span class="sidebar-label">Market</span>
            </li>
            <li class="sidebar-item" data-section="transactions">
              <span class="material-icons-outlined sidebar-icon"
                >swap_horiz</span
              >
              <span class="sidebar-label">Transactions</span>
            </li>
            <li class="sidebar-item" data-section="news">
              <span class="material-icons-outlined sidebar-icon">feed</span>
              <span class="sidebar-label">News</span>
            </li>
            <li class="sidebar-item" data-section="staking">
              <span class="material-icons-outlined sidebar-icon">savings</span>
              <span class="sidebar-label">Staking</span>
            </li>
            <li class="sidebar-item" data-section="security">
              <span class="material-icons-outlined sidebar-icon">security</span>
              <span class="sidebar-label">Security</span>
            </li>
            <li class="sidebar-item" data-section="support">
              <span class="material-icons-outlined sidebar-icon"
                >help_outline</span
              >
              <span class="sidebar-label">Support</span>
            </li>
          </ul>
        </nav>
      </aside>
      <main class="main-content">
        <nav class="tabs-nav">
          <button class="tab-button active" data-tab="overview">
            Overview
          </button>
          <button class="tab-button" data-tab="analytics">Analytics</button>
          <button class="tab-button" data-tab="settings">Settings</button>
        </nav>
        <div class="tab-content">
          <div class="wallet-summary dashboard-wallet-card">
            <div class="wallet-main-row">
              <span class="material-icons-outlined wallet-icon"
                >account_balance_wallet</span
              >
              <div class="wallet-balance-group">
                <div class="wallet-balance-label">Portfolio Value</div>
                <div class="wallet-balance-amount">$12,500</div>
              </div>
              <div class="wallet-actions">
                <button class="wallet-action-btn">
                  <span class="material-icons-outlined">north_east</span>Deposit
                </button>
                <button class="wallet-action-btn">
                  <span class="material-icons-outlined">south_west</span
                  >Withdraw
                </button>
              </div>
            </div>
            <div class="wallet-assets-row">
              <div class="wallet-asset">
                <span
                  class="material-icons-outlined asset-icon"
                  style="color: #f7931a"
                  >currency_bitcoin</span
                >
                BTC: <b>0.18</b>
              </div>
              <div class="wallet-asset">
                <span
                  class="material-icons-outlined asset-icon"
                  style="color: #627eea"
                  >currency_ethereum</span
                >
                ETH: <b>2.4</b>
              </div>
              <div class="wallet-asset">
                <span
                  class="material-icons-outlined asset-icon"
                  style="color: #ffd700"
                  >attach_money</span
                >
                USDT: <b>1,200</b>
              </div>
            </div>
          </div>
          <div class="widget-grid" id="overview-grid">
            <div class="widget" style="grid-row: span 2">
              <div class="widget-header">
                <h3>Bitcoin Price Chart</h3>
                <button class="widget-settings">⋮</button>
              </div>
              <div class="widget-content">
                <iframe
                  src="https://www.tradingview.com/widgetembed/?frameElementId=tradingview_1b6e2&symbol=BITSTAMP%3ABTCUSD&interval=60&hidesidetoolbar=1&symboledit=1&saveimage=1&toolbarbg=f1f3f6&studies=[]&theme=light&style=1&timezone=Etc%2FUTC&withdateranges=1&hidevolume=0&hideideas=1&studies_overrides={}&overrides={}&enabled_features=[]&disabled_features=[]&locale=en"
                  style="width: 100%; min-height: 220px; border: 0"
                  allowtransparency="true"
                  scrolling="no"
                ></iframe>
                <div class="nested-content">
                  <h4>Recent BTC/USD Data</h4>
                  <ul id="btcDataList">
                    <li>
                      <strong>16:00</strong> — $69,000
                      <span style="color: #3498db; font-size: 0.95em"
                        >(1.2 BTC)</span
                      >
                    </li>
                    <li>
                      <strong>15:00</strong> — $68,850
                      <span style="color: #3498db; font-size: 0.95em"
                        >(0.8 BTC)</span
                      >
                    </li>
                    <li>
                      <strong>14:00</strong> — $68,600
                      <span style="color: #3498db; font-size: 0.95em"
                        >(1.5 BTC)</span
                      >
                    </li>
                    <li>
                      <strong>13:00</strong> — $68,700
                      <span style="color: #3498db; font-size: 0.95em"
                        >(0.9 BTC)</span
                      >
                    </li>
                    <li>
                      <strong>12:00</strong> — $68,500
                      <span style="color: #3498db; font-size: 0.95em"
                        >(1.1 BTC)</span
                      >
                    </li>
                    <li>
                      <strong>11:00</strong> — $68,100
                      <span style="color: #3498db; font-size: 0.95em"
                        >(1.0 BTC)</span
                      >
                    </li>
                    <li>
                      <strong>10:00</strong> — $68,450
                      <span style="color: #3498db; font-size: 0.95em"
                        >(0.7 BTC)</span
                      >
                    </li>
                    <li>
                      <strong>09:00</strong> — $68,200
                      <span style="color: #3498db; font-size: 0.95em"
                        >(1.3 BTC)</span
                      >
                    </li>
                  </ul>
                </div>
              </div>
              <div class="resize-handle"></div>
            </div>
            <div class="widget">
              <div class="widget-header">
                <h3>User Activity</h3>
                <button class="widget-settings">⋮</button>
              </div>
              <div class="widget-content">
                <ul class="user-activity-metrics">
                  <li>
                    <span class="metric-label">Logins:</span>
                    <span class="metric-value">1,245</span>
                  </li>
                  <li>
                    <span class="metric-label">Trades Executed:</span>
                    <span class="metric-value">312</span>
                  </li>
                  <li>
                    <span class="metric-label">Deposits:</span>
                    <span class="metric-value">$45,000</span>
                  </li>
                  <li>
                    <span class="metric-label">Withdrawals:</span>
                    <span class="metric-value">$12,300</span>
                  </li>
                  <li>
                    <span class="metric-label">Active Sessions:</span>
                    <span class="metric-value">27</span>
                  </li>
                  <li>
                    <span class="metric-label">New Users Today:</span>
                    <span class="metric-value">19</span>
                  </li>
                </ul>
                <div
                  style="margin-top: 18px; font-size: 0.97em; color: #516b85"
                >
                  <em>Last updated: May 21, 2025, 16:00 UTC</em>
                </div>
              </div>
              <div class="resize-handle"></div>
            </div>
            <div class="widget">
              <div class="widget-header">
                <h3>Revenue</h3>
                <button class="widget-settings">⋮</button>
              </div>
              <div class="widget-content">
                <div class="revenue-chart-container">
                  <svg
                    id="revenueBarChart"
                    width="100%"
                    height="120"
                    viewBox="0 0 240 120"
                    style="max-width: 100%"
                  >
                    <g>
                      <rect
                        x="10"
                        y="40"
                        width="24"
                        height="70"
                        fill="#3498db"
                        rx="4"
                      ></rect>
                      <rect
                        x="44"
                        y="30"
                        width="24"
                        height="80"
                        fill="#ffd700"
                        rx="4"
                      ></rect>
                      <rect
                        x="78"
                        y="60"
                        width="24"
                        height="50"
                        fill="#516b85"
                        rx="4"
                      ></rect>
                      <rect
                        x="112"
                        y="20"
                        width="24"
                        height="90"
                        fill="#2c3e50"
                        rx="4"
                      ></rect>
                      <rect
                        x="146"
                        y="55"
                        width="24"
                        height="55"
                        fill="#3498db"
                        rx="4"
                      ></rect>
                      <rect
                        x="180"
                        y="80"
                        width="24"
                        height="30"
                        fill="#ffd700"
                        rx="4"
                      ></rect>
                    </g>
                    <g font-size="10" fill="#516b85" font-family="sans-serif">
                      <text x="12" y="35">Jan</text>
                      <text x="46" y="25">Feb</text>
                      <text x="80" y="55">Mar</text>
                      <text x="114" y="15">Apr</text>
                      <text x="148" y="50">May</text>
                      <text x="182" y="75">Jun</text>
                    </g>
                  </svg>
                </div>
                <ul class="revenue-metrics">
                  <li>
                    <span class="metric-label">Total Revenue:</span>
                    <span class="metric-value">$1,250,000</span>
                  </li>
                  <li>
                    <span class="metric-label">Monthly Growth:</span>
                    <span class="metric-value" style="color: #27ae60"
                      >+8.2%</span
                    >
                  </li>
                  <li>
                    <span class="metric-label">Top Source:</span>
                    <span class="metric-value">Spot Trading</span>
                  </li>
                  <li>
                    <span class="metric-label">Avg. Daily Revenue:</span>
                    <span class="metric-value">$41,667</span>
                  </li>
                </ul>
                <div
                  style="margin-top: 16px; font-size: 0.97em; color: #516b85"
                >
                  <em>Last updated: May 21, 2025, 16:00 UTC</em>
                </div>
              </div>
              <div class="resize-handle"></div>
            </div>
            <div class="widget" style="grid-column: span 2">
              <div class="widget-header">
                <h3>Traffic Sources</h3>
                <button class="widget-settings">⋮</button>
              </div>
              <div class="widget-content">
                <div class="traffic-sources-grid">
                  <div class="traffic-source">
                    <div class="traffic-label">Direct</div>
                    <div class="traffic-value">38.2%</div>
                    <div
                      class="traffic-bar"
                      style="
                        background: linear-gradient(
                          90deg,
                          #ffd700 70%,
                          #f9e79f 100%
                        );
                        width: 82%;
                      "
                    ></div>
                  </div>
                  <div class="traffic-source">
                    <div class="traffic-label">Referral</div>
                    <div class="traffic-value">21.5%</div>
                    <div
                      class="traffic-bar"
                      style="
                        background: linear-gradient(
                          90deg,
                          #27ae60 70%,
                          #b7eacb 100%
                        );
                        width: 46%;
                      "
                    ></div>
                  </div>
                  <div class="traffic-source">
                    <div class="traffic-label">Organic Search</div>
                    <div class="traffic-value">18.7%</div>
                    <div
                      class="traffic-bar"
                      style="
                        background: linear-gradient(
                          90deg,
                          #e67e22 70%,
                          #f9d7b5 100%
                        );
                        width: 40%;
                      "
                    ></div>
                  </div>
                  <div class="traffic-source">
                    <div class="traffic-label">Social</div>
                    <div class="traffic-value">13.6%</div>
                    <div
                      class="traffic-bar"
                      style="
                        background: linear-gradient(
                          90deg,
                          #9b59b6 70%,
                          #e8d6f3 100%
                        );
                        width: 32%;
                      "
                    ></div>
                  </div>
                  <div class="traffic-source">
                    <div class="traffic-label">Email</div>
                    <div class="traffic-value">8.0%</div>
                    <div
                      class="traffic-bar"
                      style="
                        background: linear-gradient(
                          90deg,
                          #e74c3c 70%,
                          #f7b7b7 100%
                        );
                        width: 19%;
                      "
                    ></div>
                  </div>
                  <div class="traffic-source">
                    <div class="traffic-label">Other</div>
                    <div class="traffic-value">0.0%</div>
                    <div
                      class="traffic-bar"
                      style="
                        background: linear-gradient(
                          90deg,
                          #bdc3c7 70%,
                          #f4f6f7 100%
                        );
                        width: 2%;
                      "
                    ></div>
                  </div>
                </div>
                <div style="margin-top: 16px; font-size: 0.97em; color: #888">
                  <em>Last updated: May 21, 2025, 16:00 UTC</em>
                </div>
              </div>
              <div class="resize-handle"></div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // Sidebar toggle functionality
      document
        .getElementById("sidebar-toggle")
        .addEventListener("click", function () {
          const dash = document.querySelector(".dashnau");
          dash.classList.toggle("sidebar-collapsed");
          document.querySelector(".sidebar").classList.add("sidebar-animating");
          setTimeout(() => {
            document
              .querySelector(".sidebar")
              .classList.remove("sidebar-animating");
          }, 350);
        });

      // Tab switching functionality
      document.querySelectorAll(".tab-button").forEach((button) => {
        button.addEventListener("click", function () {
          // Remove active class from all tabs
          document.querySelectorAll(".tab-button").forEach((btn) => {
            btn.classList.remove("active");
          });

          // Add active class to clicked tab
          this.classList.add("active");

          // Handle tab content switching (in a real app)
          console.log(`Switched to ${this.dataset.tab} tab`);
        });
      });

      // Very basic resize functionality (simplified for demo)
      document.querySelectorAll(".resize-handle").forEach((handle) => {
        handle.addEventListener("mousedown", function (e) {
          const widget = this.parentNode;
          const startX = e.clientX;
          const startY = e.clientY;
          const startWidth = widget.offsetWidth;
          const startHeight = widget.offsetHeight;

          function onMouseMove(mouseMoveEvent) {
            const newWidth = startWidth + mouseMoveEvent.clientX - startX;
            const newHeight = startHeight + mouseMoveEvent.clientY - startY;

            // Set minimum sizes
            if (newWidth >= 200) {
              widget.style.width = newWidth + "px";
            }
            if (newHeight >= 150) {
              widget.style.height = newHeight + "px";
            }
          }

          function onMouseUp() {
            document.removeEventListener("mousemove", onMouseMove);
            document.removeEventListener("mouseup", onMouseUp);
          }

          document.addEventListener("mousemove", onMouseMove);
          document.addEventListener("mouseup", onMouseUp);

          e.preventDefault(); // Prevent text selection during drag
        });
      });

      // Profile dropdown functionality
      const profileToggle = document.getElementById("profileDropdownToggle");
      const profileDropdown = document.getElementById("profileDropdown");
      document.addEventListener("click", function (e) {
        if (profileToggle.contains(e.target)) {
          profileDropdown.classList.toggle("show");
          if (profileDropdown.classList.contains("show")) {
            profileDropdown.classList.add("dropdown-animating");
            setTimeout(
              () => profileDropdown.classList.remove("dropdown-animating"),
              250
            );
          }
        } else {
          profileDropdown.classList.remove("show");
        }
      });

      // Sidebar navigation active state
      document.querySelectorAll(".sidebar-item").forEach((item) => {
        item.addEventListener("click", function () {
          document
            .querySelectorAll(".sidebar-item")
            .forEach((i) => i.classList.remove("active"));
          this.classList.add("active");
          // Optionally, you can handle section switching here
        });
      });

      document
        .querySelectorAll(".profile-dropdown li")[0]
        .addEventListener("click", function (e) {
          window.location.href = "profile.html";
        });
      document
        .querySelectorAll(".profile-dropdown li")[1]
        .addEventListener("click", function (e) {
          window.location.href = "settings.html";
        });
      // 6. Add loading state for Save/Action buttons (for dashboard, this could be for wallet actions)
      document.querySelectorAll(".wallet-action-btn").forEach((btn) => {
        btn.addEventListener("click", function (e) {
          btn.disabled = true;
          const original = btn.innerHTML;
          btn.innerHTML =
            '<span class="material-icons-outlined spin">autorenew</span> Processing...';
          setTimeout(() => {
            btn.innerHTML = original;
            btn.disabled = false;
          }, 1200);
        });
      });
      // 7. Semantic HTML is already used (header, nav, main, aside, etc.)
      // 8. Add ARIA labels for accessibility to dropdown/profile links
      const profileLinks = document.querySelectorAll(".profile-dropdown li");
      profileLinks[0].setAttribute("tabindex", "0");
      profileLinks[0].setAttribute("role", "button");
      profileLinks[0].setAttribute("aria-label", "View Profile");
      profileLinks[1].setAttribute("tabindex", "0");
      profileLinks[1].setAttribute("role", "button");
      profileLinks[1].setAttribute("aria-label", "Settings");
      profileLinks[2].setAttribute("tabindex", "0");
      profileLinks[2].setAttribute("role", "button");
      profileLinks[2].setAttribute("aria-label", "Logout");
      // 9. Unify widget/settings button icon (replace ⋮ with Material Icon)
      document.querySelectorAll(".widget-settings").forEach((btn) => {
        btn.innerHTML =
          '<span class="material-icons-outlined">more_vert</span>';
      });
      // 10. Add transition to wallet-action-btn and widget-settings for smoother feedback
      // (CSS is updated in practice1.css, but add a class for quick feedback)
      document
        .querySelectorAll(".wallet-action-btn, .widget-settings")
        .forEach((btn) => {
          btn.classList.add("transition-class");
        });
      // Theme sync across pages
      (function () {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.body.classList.add("dark-mode");
        } else {
          document.body.classList.remove("dark-mode");
        }
      })();
      // 11. Toast Notification System
      function showToast(message, type = "info") {
        // Remove existing toast if present
        const oldToast = document.getElementById("copilot-toast");
        if (oldToast) oldToast.remove();

        const toast = document.createElement("div");
        toast.id = "copilot-toast";
        toast.className = `copilot-toast copilot-toast-${type}`;
        toast.innerHTML = `<span>${message}</span>`;
        document.body.appendChild(toast);

        setTimeout(() => {
          toast.classList.add("show");
        }, 10);

        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => toast.remove(), 400);
        }, 2200);
      }

      // Example: Show toast on wallet action
      document.querySelectorAll(".wallet-action-btn").forEach((btn) => {
        btn.addEventListener("click", function (e) {
          // ...existing loading state code...
          showToast(
            btn.textContent.includes("Deposit")
              ? "Deposit started!"
              : "Withdrawal started!",
            "success"
          );
        });
      });
      // 12. Sync TradingView Chart Theme with App Theme
      (function () {
        const updateChartTheme = () => {
          const iframe = document.querySelector('iframe[src*="tradingview"]');
          if (!iframe) return;
          const theme =
            localStorage.getItem("theme") === "dark" ? "dark" : "light";
          // Reload the iframe with the correct theme param
          let src = iframe.src;
          src = src.replace(/theme=(dark|light)/, `theme=${theme}`);
          if (!src.includes(`theme=${theme}`)) {
            src += (src.includes("?") ? "&" : "?") + `theme=${theme}`;
          }
          iframe.src = src;
        };
        // On load and on theme change
        updateChartTheme();
        window.addEventListener("storage", (e) => {
          if (e.key === "theme") updateChartTheme();
        });
        // Optionally, listen for theme toggle in-app and call updateChartTheme()
      })();
    </script>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-analytics.js";
      import {
        getAuth,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-auth.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCq0a3H7LIYRnBEdWuHl4XUlmn06ojN01w",
        authDomain: "cryptonowbyfirebyforce.firebaseapp.com",
        projectId: "cryptonowbyfirebyforce",
        storageBucket: "cryptonowbyfirebyforce.firebasestorage.app",
        messagingSenderId: "245282040067",
        appId: "1:245282040067:web:12dc1f560691d3e9d6e136",
        measurementId: "G-20726VFERM",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth();

      // 1. Redirect to login if not authenticated
      onAuthStateChanged(auth, (user) => {
        if (!user) {
          window.location.href = "login.html";
        }
      });

      // 2. Logout functionality for profile dropdown's Logout action
      document.addEventListener("DOMContentLoaded", () => {
        const logoutBtn = document.querySelectorAll(".profile-dropdown li")[2];
        if (logoutBtn) {
          logoutBtn.addEventListener("click", function () {
            signOut(auth).then(() => {
              window.location.href = "login.html";
            });
          });
        }
      });

      // 3. Fetch live crypto prices for wallet assets
      fetch(
        "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,tether&vs_currencies=usd"
      )
        .then((res) => res.json())
        .then((data) => {
          // Update wallet asset values with live prices
          const btcAsset = document.querySelector(
            ".wallet-asset:nth-child(1) b"
          );
          const ethAsset = document.querySelector(
            ".wallet-asset:nth-child(2) b"
          );
          const usdtAsset = document.querySelector(
            ".wallet-asset:nth-child(3) b"
          );
          if (btcAsset) btcAsset.textContent = data.bitcoin.usd;
          if (ethAsset) ethAsset.textContent = data.ethereum.usd;
          if (usdtAsset) usdtAsset.textContent = data.tether.usd;
        });
    </script>
  </body>
</html>
